<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Updater</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
             body {
                 font-family: 'Roboto', sans-serif;
             }
    </style>

      <link rel="stylesheet" href="C:\Users\91798\Documents\project - Copy (2)\New folder\static\styles.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    
    </head>
    <body>
    
    
    
    
    
          
      <div class="navbar1">
        <div class="logo2"><a href="../home - Copy.html">BeBest</a></div>
        <div class="nav-links" id="nav-links">
            <a href="../f1.html">Dream Career</a>
            <a href="../courses.html">Courses</a>
            <a href="../templates/index.html">Support</a>
            <a href="./index1.html">Dashboard</a>
          <button id="login-button" onclick="showLoginForm()">Login</button>
          <button id="signup-button" onclick="showSignupForm()">Sign Up</button>
          <div id="profile-icon" style="display: none;"></div>
          <button id="logout1" class="logout1" style="display: none;" onclick="logout()">Logout</button>
        </div>
      </div>
    
      <div id="login-form" style="display: none; background: #009990; color: rgb(255, 255, 255); padding: 20px; padding-left: 55px;">
        <h2 style="font-size: 3rem;">Login</h2><br>
        <input type="text" id="username" placeholder="Username" style="width: 20%;"><br><br>
        <input type="password" id="password" placeholder="Password" style="width: 20%;"><br><br>
        <button class="btn btn-light" onclick="login()" >Submit</button>
        <button class="btn btn-light" onclick="hideLoginForm()">Cancel</button>
      </div>
    
      <div id="signup-form" style="display: none; background: #009990; color: rgb(255, 255, 255); padding: 20px; padding-left: 55px;">
        <h2 style="font-size: 3rem;">Sign Up</h2><br>
        <input type="text" id="signup-username" placeholder="Username" style="width: 20%;"><br><br>
        <input type="password" id="signup-password" placeholder="Password" style="width: 20%;"><br><br>
        <input type="text" id="signup-name" placeholder="Name" style="width: 20%;"><br><br>
        <button class="btn btn-light" onclick="signup()">Submit</button>
        <button class="btn btn-light" onclick="hideSignupForm()">Cancel</button>
      </div>
    
    
      <div class="bg-[#001f3d] min-h-screen flex flex-col items-center justify-center space-y-8 p-8">
        <div class="container mx-auto p-4 bg-[#0f1010] shadow-lg rounded-lg max-w-lg">
         <h1 class="text-2xl font-bold mb-4 text-center text-white">
          User Profile Updater
         </h1>
         <form class="space-y-4" id="profileForm">
          <div>
           <label class="block text-sm font-medium text-gray-300" for="name">
            Name:
           </label>
           <input class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#009990] focus:border-[#009990] sm:text-sm" id="name" name="name" required="" type="text" value="John Doe"/>
          </div>
          <div>
           <label class="block text-sm font-medium text-gray-300" for="email">
            Email:
           </label>
           <input class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#009990] focus:border-[#009990] sm:text-sm" id="email" name="email" required="" type="email" value="john.doe@example.com"/>
          </div>
          <div>
           <label class="block text-sm font-medium text-gray-300" for="age">
            Age:
           </label>
           <input class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#009990] focus:border-[#009990] sm:text-sm" id="age" name="age" required="" type="number" value="30"/>
          </div>
          <div>
           <label class="block text-sm font-medium text-gray-300" for="location">
            Location:
           </label>
           <input class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#009990] focus:border-[#009990] sm:text-sm" id="location" name="location" required="" type="text" value="New York"/>
          </div>
          <div class="text-center">
           <button class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#009990] hover:bg-[#007f7f] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#009990]" type="submit">
            Update Profile
           </button>
          </div>
         </form>
        </div>
        <div class="container mx-auto p-4 bg-[#0f1010] shadow-lg rounded-lg max-w-lg">
         <h2 class="text-xl font-bold mb-4 text-center text-white">
          Profile Information
         </h2>
         <div class="space-y-4" id="profileInfo">
          <div class="flex items-center space-x-4">
           <img alt="Profile picture of John Doe" class="w-24 h-24 rounded-full shadow-md" height="100" src="https://storage.googleapis.com/a1aa/image/NyjikQFHUNKhi_PTW1Rjr5s-39QQAjQVG6fVVcvC2eU.jpg" width="100"/>
           <div>
            <p class="text-lg font-semibold text-white">
             John Doe
            </p>
            <p class="text-sm text-gray-400">
             john.doe@example.com
            </p>
           </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
           <div class="bg-[#001f3d] p-4 rounded-lg shadow-inner">
            <p class="text-sm font-medium text-gray-300">
             Age
            </p>
            <p class="text-lg font-semibold text-white">
             30
            </p>
           </div>
           <div class="bg-[#001f3d] p-4 rounded-lg shadow-inner">
            <p class="text-sm font-medium text-gray-300">
             Location
            </p>
            <p class="text-lg font-semibold text-white">
             New York
            </p>
           </div>
          </div>
         </div>
        </div>
       </div>
       
    <footer class="bg-gray-900 text-white text-center py-12">
        <div>
            <h2 class="text-2xl font-semibold mb-4">Follow us on</h2>
        </div>
        <div class="flex justify-center space-x-4 mb-4">
            <a href="https://www.facebook.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.twitter.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.linkedin.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="https://www.instagram.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
        <div>
            <p class="text-sm">stay connected with us</p>
        </div>
    </footer>















    <script>
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            fetch('/update_profile', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Update the profile information displayed on the page
                document.getElementById('profileInfo').innerHTML = `
                    <p><strong>Name:</strong> ${data.name}</p>
                    <p><strong>Email:</strong> ${data.email}</p>
                    <p><strong>Age:</strong> ${data.age}</p>
                    <p><strong>Location:</strong> ${data.location}</p>
                `;
                // Update the form fields with the new data
                document.getElementById('name').value = data.name;
                document.getElementById('email').value = data.email;
                document.getElementById('age').value = data.age;
                document.getElementById('location').value = data.location;
            })
            .catch(error => console.error('Error:', error));
        });
    </script>


<script>
    function showLoginForm() {
      document.getElementById('login-form').style.display = 'block';
    }

    function hideLoginForm() {
      document.getElementById('login-form').style.display = 'none';
    }

    function showSignupForm() {
      document.getElementById('signup-form').style.display = 'block';
    }

    function hideSignupForm() {
      document.getElementById('signup-form').style.display = 'none';
    }

    async function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const response = await fetch('http://localhost:5000/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await response.json();

      if (response.ok) {
        localStorage.setItem('token', data.token);
        updateUIAfterLogin(data.token);
        hideLoginForm();
      } else {
        alert(data.message);
      }
    }

    async function signup() {
      const username = document.getElementById('signup-username').value;
      const password = document.getElementById('signup-password').value;
      const name = document.getElementById('signup-name').value;

      const response = await fetch('http://localhost:5000/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password, name })
      });

      const data = await response.json();

      if (response.ok) {
        alert('Signup successful! You can now log in.');
        hideSignupForm();
      } else {
        alert(data.message);
      }
    }

    function logout() {
      localStorage.removeItem('token');
      document.getElementById('login-button').style.display = 'inline-block';
      document.getElementById('signup-button').style.display = 'inline-block';
      document.getElementById('profile-icon').style.display = 'none';
      document.getElementById('logout1').style.display = 'none';
    }

    function updateUIAfterLogin(token) {
      const name = JSON.parse(atob(token.split('.')[1])).name; // Decode JWT
      document.getElementById('login-button').style.display = 'none';
      document.getElementById('signup-button').style.display = 'none';
      document.getElementById('profile-icon').style.display = 'flex';
      document.getElementById('logout1').style.display = 'inline-block';
      document.getElementById('profile-icon').innerText = name[0]; // First letter of name
    }

    async function checkLoginStatus() {
      const token = localStorage.getItem('token');

      if (token) {
        const response = await fetch('http://localhost:5000/verify', {
          headers: { 'Authorization': token }
        });

        if (response.ok) {
          updateUIAfterLogin(token);
        } else {
          localStorage.removeItem('token');
        }
      }
    }

    checkLoginStatus(); 
  </script>





<script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="mwd6CSLWtuzld2Jkmjggp";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>






</body>
</html>