<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Updater</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
             body {
                 font-family: 'Roboto', sans-serif;
             }
        body {
            font-family: Arial, sans-serif;
            background-color: #001f3d;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: #0f1010;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            text-align: center;
            color: white;
        }
        .detail {
            margin: 10px 0;
        }
    </style>

      <link rel="stylesheet" href="C:\Users\91798\Documents\project - Copy (2)\New folder\static\styles.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="stylesheet" href="../static/styles.css">    
    </head>
    <body>
    
    
    
    
    
          
      <div class="navbar1">
        <div class="logo2"><a href="http://127.0.0.1:5001/">BeBest</a></div>
        <div class="nav-links" id="nav-links">
          <a href="http://127.0.0.1:5003/">Dream Career</a>
          <a href="http://127.0.0.1:5002/">Courses</a>
          <a href="http://127.0.0.1:5016/">Support</a>
          <a href="http://127.0.0.1:8013/">Dashboard</a>
          <button id="login-button" onclick="showLoginForm()">Login</button>
          <button id="signup-button" onclick="showSignupForm()">Sign Up</button>
          <div id="profile-icon" style="display: none;"></div>
          <button id="logout1" class="logout1" style="display: none;" onclick="logout()">Logout</button>
        </div>
      </div>
    
      <div id="login-form" style="display: none; background: #009990; color: rgb(255, 255, 255); padding: 20px; padding-left: 55px;">
        <h2 style="font-size: 3rem;">Login</h2><br>
        <input type="text" id="username" placeholder="Username" style="width: 20%;"><br><br>
        <input type="password" id="password" placeholder="Password" style="width: 20%;"><br><br>
        <button class="btn btn-light" onclick="login()" >Submit</button>
        <button class="btn btn-light" onclick="hideLoginForm()">Cancel</button>
      </div>
    
      <div id="signup-form" style="display: none; background: #009990; color: rgb(255, 255, 255); padding: 20px; padding-left: 55px;">
        <h2 style="font-size: 3rem;">Sign Up</h2><br>
        <input type="text" id="signup-username" placeholder="Username" style="width: 20%;"><br><br>
        <input type="password" id="signup-password" placeholder="Password" style="width: 20%;"><br><br>
        <input type="text" id="signup-name" placeholder="Name" style="width: 20%;"><br><br>
        <button class="btn btn-light" onclick="signup()">Submit</button>
        <button class="btn btn-light" onclick="hideSignupForm()">Cancel</button>
      </div>
    

      <div class="bg-[#001f3d] text-white p-5">
        <div class="container mx-auto max-w-lg bg-[#0f1010] p-8 rounded-lg shadow-lg">
            <h2 class="text-3xl text-center text-white mb-6">User Profile</h2>
            <form id="profileForm" action="/update_profile" method="POST" enctype="multipart/form-data">
                <div class="mb-4">
                    <label for="name" class="block text-white mb-2">Name:</label>
                    <input type="text" id="name" name="name" placeholder="Enter your name" required class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500"/>
                </div>
                <div class="mb-4">
                    <label for="email" class="block text-white mb-2">Email:</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500"/>
                </div>
                <div class="mb-4">
                    <label for="age" class="block text-white mb-2">Age:</label>
                    <input type="number" id="age" name="age" placeholder="Enter your age" required class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500"/>
                </div>
                <div class="mb-4">
                    <label for="Programe" class="block text-white mb-2">Degree:</label>
                    <input type="text" id="Programe" name="Programe" placeholder="Enter your Degree" required class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500"/>
                </div>
                <div class="mb-4">
                    <label for="profile_image" class="block text-white mb-2">Profile Image:</label>
                    <input type="file" id="profile_image" name="profile_image" accept="image/*" required class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500"/>
                </div>
                <div class="mb-4">
                    <label class="block text-white mb-2">Skills:</label>
                    <div class="chips-container flex flex-wrap gap-2" id="skillsContainer">
                        <input type="text" id="skillInput" placeholder="Add a skill" class="w-full p-2 rounded bg-[#0f1010] text-white border border-teal-500 mb-2" />
                        <button type="button" class="bg-teal-500 text-white py-2 px-4 rounded hover:bg-teal-600" onclick="addSkill()">Add Skill</button>
                    </div>
                    <input type="hidden" name="skills" id="skills" />
                </div>
                <div class="text-center">
                    <button type="submit" class="bg-teal-500 text-white py-2 px-4 rounded hover:bg-teal-600">Update Profile</button>
                </div>
            </form>
            <div id="profileInfo" class="mt-5"></div>
        </div>
      </div>










    <footer class="bg-gray-900 text-white text-center py-12">
        <div>
            <h2 class="text-2xl font-semibold mb-4">Follow us on</h2>
        </div>
        <div class="flex justify-center space-x-4 mb-4">
            <a href="https://www.facebook.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.twitter.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.linkedin.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="https://www.instagram.com" target="_blank" class="bg-teal-500 p-3 rounded-full text-white">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
        <div>
            <p class="text-sm">stay connected with us</p>
        </div>
    </footer>






    



  <script>
      function addSkill() {
          const skillInput = document.getElementById('skillInput');
          const skill = skillInput.value.trim();
          if (skill) {
              const skillContainer = document.getElementById('skillsContainer');
              const newSkill = document.createElement('div');
              newSkill.className = 'chip chip-skill flex items-center bg-[#009990] text-[#ffffff] px-3 py-1 rounded-full';
              newSkill.innerHTML = `
                  <span class="chip-text">${skill}</span>
                  <i class="fas fa-times ml-2 cursor-pointer" onclick="removeSkill(this)"></i>
              `;
              skillContainer.insertBefore(newSkill, skillInput);
              skillInput.value = ''; // Clear the input field
              updateSkills(); // Update hidden input
          }
      }

      function removeSkill(element) {
          element.parentElement.remove();
          updateSkills(); // Update hidden input
      }

      function updateSkills() {
          const skills = Array.from(document.querySelectorAll('.chips-container .chip-text')).map(chip => chip.innerText);
          document.getElementById('skills').value = JSON.stringify(skills); // Store skills as JSON string
      }

      document.getElementById('profileForm').addEventListener('submit', function(e) {
          e.preventDefault(); // Prevent the default form submission

          const formData = new FormData(this);
          fetch('/update_profile', {
              method: 'POST',
              body: formData
          })
          .then(response => response.json())
          .then(data => {
              // Display success message and updated profile information
              document.getElementById('profileInfo').innerHTML = `
                  <p><strong>Name:</strong> ${data.data.name}</p>
                  <p><strong>Email:</strong> ${data.data.email}</p>
                  <p><strong>Age:</strong> ${data.data.age}</p>
                  <p><strong>Programe:</strong> ${data.data.location}</p>
                  <p><strong>Profile Image:</strong> <img src="${data.data.profile_image}" alt="Profile Image" style="width: 100px; height: auto;"></p>
                  <p><strong>Skills:</strong> ${data.data.skills.join(', ')}</p>
              `;
          })
          .catch(error => console.error('Error:', error));
      });
  </script>
<script>
    function showLoginForm() {
      document.getElementById('login-form').style.display = 'block';
    }

    function hideLoginForm() {
      document.getElementById('login-form').style.display = 'none';
    }

    function showSignupForm() {
      document.getElementById('signup-form').style.display = 'block';
    }

    function hideSignupForm() {
      document.getElementById('signup-form').style.display = 'none';
    }

    async function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const response = await fetch('http://localhost:5000/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await response.json();

      if (response.ok) {
        localStorage.setItem('token', data.token);
        updateUIAfterLogin(data.token);
        hideLoginForm();
      } else {
        alert(data.message);
      }
    }

    async function signup() {
      const username = document.getElementById('signup-username').value;
      const password = document.getElementById('signup-password').value;
      const name = document.getElementById('signup-name').value;

      const response = await fetch('http://localhost:5000/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password, name })
      });

      const data = await response.json();

      if (response.ok) {
        alert('Signup successful! You can now log in.');
        hideSignupForm();
      } else {
        alert(data.message);
      }
    }

    function logout() {
      localStorage.removeItem('token');
      document.getElementById('login-button').style.display = 'inline-block';
      document.getElementById('signup-button').style.display = 'inline-block';
      document.getElementById('profile-icon').style.display = 'none';
      document.getElementById('logout1').style.display = 'none';
    }

    function updateUIAfterLogin(token) {
      const name = JSON.parse(atob(token.split('.')[1])).name; // Decode JWT
      document.getElementById('login-button').style.display = 'none';
      document.getElementById('signup-button').style.display = 'none';
      document.getElementById('profile-icon').style.display = 'flex';
      document.getElementById('logout1').style.display = 'inline-block';
      document.getElementById('profile-icon').innerText = name[0]; // First letter of name
    }

    async function checkLoginStatus() {
      const token = localStorage.getItem('token');

      if (token) {
        const response = await fetch('http://localhost:5000/verify', {
          headers: { 'Authorization': token }
        });

        if (response.ok) {
          updateUIAfterLogin(token);
        } else {
          localStorage.removeItem('token');
        }
      }
    }

    checkLoginStatus(); 
  </script>





<script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="mwd6CSLWtuzld2Jkmjggp";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>






</body>
</html>